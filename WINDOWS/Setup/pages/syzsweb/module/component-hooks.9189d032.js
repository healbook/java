(window.webpackJsonpsyzs=window.webpackJsonpsyzs||[]).push([["component-hooks"],{"0fOR":function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n("ohty"),o=n("q1tI"),a=n("ld/X");function i(e){var t=e.delay,n=void 0===t?100:t,i=e.callbackFunc,u=Object(o.useRef)(null);u.current=document.getElementById("page-content")||document.documentElement;var c=Object(o.useRef)((function(){})),s=Object(o.useCallback)((function(){var e=u.current;return{top:e.scrollTop,left:e.scrollLeft,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,width:e.offsetWidth,height:e.offsetHeight,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}}),[]);return Object(o.useMemo)((function(){var e=function(){var e=s();return i(e)};c.current=n>0?r._.debounce(e,n):e}),[n,i]),Object(a.p)("scroll",c.current,u.current||window,{passive:!0}),{trigger:c.current,ref:u.current}}t.a=i},"2vAR":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("Hd7B"),o=n("wz3H"),a=n.n(o),i=n("ohty"),u=n("q1tI"),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=Object(r.i)()+"/v2/syzssource",l=parseInt(sessionStorage.getItem("syzs_dyn_uuid")||"0",10);l||(l=parseInt(""+Date.now()+1e5*Math.random(),10),sessionStorage.setItem("syzs_dyn_uuid",l.toString()));var d={head:{cmd:"syzssource",userInfo:{guid:"",qimei:"",imei:"",uuid:"",evilScore:0},authInfo:{businessId:"AuthName",signature:"",appId:"0",A2:[],uin:0,qqOpenId:"",weixinAccessToken:"",weixinOpenId:"",nonce:94166378,UserIpv4:""},hostAppInfo:{pkgName:"",versionName:"",versionCode:0,appKey:"",userId:"",channel:"",appChannelId:"",scene:""},deviceInfo:{mid:"",imei1:"",imsi1:"",imei2:"",imsi2:"",macAddr:"",xResolution:0,yResolution:0,brand:"",mode:"",manufacturer:"",product:"",platform:0,phone:""},netInfo:{netType:0,ipv4:"",ipv6:"",wifiSsid:"",wifiBssid:""},httpHeadInfo:{},protocol:0,milliSecond:0,lbsInfo:{latitude:0,longitude:0,accuracy:0,cityCode:0,province:"",city:"",district:"",street:""},qua:"",whiteBoard:0},body:{Bid:"syzs",num:0,param:'{"sourceid":5}',listS:{keyword:[""],pkgname:[""]},listI:{pagesize:[15]}}},f=function(e,t){var n=Object(u.useRef)({}),r=Object(u.useState)(null)[1];Object(u.useMemo)((function(){n.current.data=JSON.parse(JSON.stringify(d)),n.current.data.body.listS=c({},null===e||void 0===e?void 0:e.listS),n.current.data.body.listS.keyword=null===e||void 0===e?void 0:e.keyword,n.current.data.body.listS.pkgname=null===e||void 0===e?void 0:e.pkgname,n.current.data.body.listI=c({},null===e||void 0===e?void 0:e.listI),n.current.data.body.param=null===e||void 0===e?void 0:e.param,r({})}),[JSON.stringify(e)]),n.current.data.head.userInfo.guid=i.storage.getItem("guid");var o=a()({url:s+"?params="+encodeURIComponent(null===e||void 0===e?void 0:e.param),method:"post",dataJSON:n.current.data,swOption:{sw_cache_mod:"swr",sw_cache_keep:"30"}},{revalidateOnMount:!1}),l=o.data,f=o.isValidating,p=o.error,g=o.revalidate,h=((null===l||void 0===l?void 0:l.Queue)||[]).filter((function(e){return t?e.Name===t:e.Name.startsWith("Syzs-")}));return{data:h&&h[0],doRequest:function(){g()},isValidating:f,error:p}}},"4/k4":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("uR+Q"),o=n("q1tI");function a(e){var t=Object(o.useContext)(r.d).l,n=new Date,a=n.getFullYear()-e.getFullYear(),i=n.getMonth()-e.getMonth(),u=n.getDate()-e.getDate(),c=n.getHours()-e.getHours(),s=n.getMinutes()-e.getMinutes(),l=n.getSeconds()-e.getSeconds();return a>0?""+a+t("year"):i>0||i>0?""+i+t("month"):u>0?""+u+t("day"):c>0?""+c+t("hour"):s>0?""+s+t("minite"):l>0?""+l+t("second"):""}},"6nEa":function(e,t,n){"use strict";n("q1tI"),n("/UZO")},C2jg:function(e,t,n){"use strict";n.d(t,"d",(function(){return ce})),n.d(t,"b",(function(){return se})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return _})),n.d(t,"g",(function(){return de})),n.d(t,"f",(function(){return ye})),n.d(t,"e",(function(){return ke}));var r,o=n("QCBT"),a=n("Faes"),i=n("/UZO"),u=n("U0ZW"),c=n("q1tI");!function(e){e.init="init",e.pause="pause",e.downloading="downloading",e.done="done",e.error="error",e.reddot="reddot"}(r||(r={}));var s,l=n("ohty"),d=n("dbal"),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},g=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},h=Object(d.getIndexDbConnect)("download_info_cache",1,"download_report_cache"),v={},y=function(e){return e<10?"0"+e:e},w=function(e){var t=e.ext_info,n=t&&l._.JSONParseSafe(t);return n&&"1"===n.micro_client},b=function(e,t){return p(void 0,void 0,void 0,(function(){var n,r,o;return g(this,(function(a){switch(a.label){case 0:return[4,h.get(e)];case 1:return(r=a.sent())?(o=JSON.parse(r.value)).card_id&&o.trace_id?[3,3]:[4,m(e,t)]:[3,5];case 2:return n=a.sent(),[3,4];case 3:n=o,a.label=4;case 4:return[3,7];case 5:return[4,m(e,t)];case 6:n=a.sent(),a.label=7;case 7:return[2,Promise.resolve(n)]}}))}))},m=function(e,t){return p(void 0,void 0,void 0,(function(){var n,r;return g(this,(function(o){switch(o.label){case 0:return n=u.haloReport.getReportEventData(t),(r=f(f({},n),v[e])).card_id&&r.trace_id?[4,h.set(e,JSON.stringify(r),(new Date).getTime()+864e5)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2,Promise.resolve(r)]}}))}))},k=((s={}).ALL=[],s),O={downLoadQueue:{},freezeDownLoadQueue:{},downLoadBoxState:r.init,isDownloadClicked:!1};var S="UPDATE_DOWNLOADER_TASK",I="UPDATE_DOWNLOADER_TASK_SINGLE",j="UPDATE_DOWNLOADER_TASK_SINGLE_NOACTIVE",_=function(e){var t,n,r,o;switch(e.type){case S:if(e.payload.downLoadQueue)return void(null===(r=window.aegis)||void 0===r||r.report("you can't set downLoadQueue Because of poor performance"));o="ALL",l._.merge(O,e.payload);break;case I:var a=e.payload,i=a.key,u=a.value;l._.merge(O,{downLoadQueue:(t={},t[i]=l._.merge(O.freezeDownLoadQueue[i]||{},u),t)}),O.freezeDownLoadQueue[i]&&delete O.freezeDownLoadQueue[i],o=i;break;case j:var c=e.payload;i=c.key,u=c.value;l._.merge(O,{freezeDownLoadQueue:(n={},n[i]=u,n)}),o=i}window.$downloadStore=O,function(e){Array.isArray(k[e])&&k[e].forEach((function(e){return e()})),"ALL"!==e&&k.ALL.forEach((function(e){return e()}))}(o)},N=n("Hd7B"),x=function(){return(x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},E=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},q=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},L=[],R=function(e){return E(void 0,void 0,void 0,(function(){var t,n,r,o;return q(this,(function(a){switch(a.label){case 0:return t=e.supplyid,n=e.data,[4,T(n,t)];case 1:return r=a.sent(),L.push(r.pkgname),r.size&&"0"!==r.size||(delete(o=JSON.parse(JSON.stringify(r))).icon,null===window||void 0===window||window.aegis.infoAll("info:"+JSON.stringify(o)+" \u6ca1\u6709\u4f20\u5165 size \u5b57\u7aef\uff01\uff01\uff01 \u4f1a\u6709\u95ee\u9898\u5feb\u5904\u7406\uff01 ")),[2,x(x({},r),{packageName:r.pkgname,gameArea:"",size:(r.size||0).toString(),isAction:!1,isErrorMsgShow:!1,isReportInstalling:!1,isReportDownLoaded:!1,ishandleAutoDownload:!1,isInstalled:!1,isUserHandleOpen:!1})]}}))}))},T=function(e,t){return E(void 0,void 0,void 0,(function(){var n,r,o,a,i,u;return q(this,(function(c){switch(c.label){case 0:return n=e.pkgname,w(e)?[4,Object(N.c)(n,t)]:[3,2];case 1:return r=c.sent(),(o=r[n])?(a=o.apk_url,i=o.ext_info,u=i&&l._.JSONParseSafe(i),[2,x(x({},o),{isPcGame:!0,pcGameJson:JSON.stringify(x(x({},u),{downloaderUrl:a}))})]):(window.aegis.report("downloadMsg: handleMicroClientData get appInfo Error "+JSON.stringify(o)),[2]);case 2:return[2,e]}}))}))},D=function(){return(D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},M=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},J=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},P=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},z=n("wz3H"),U=n("uR+Q"),Q=function(){return(Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},B=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},W=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},H=function(e,t,n,r,a){return B(void 0,void 0,void 0,(function(){var c,s,d,f,p,g;return W(this,(function(v){switch(v.label){case 0:if(c=e.downloader,s=c.task,d=s.raw,f=(void 0===d?{}:d).rawState,p=void 0===f?i.State.init:f,g={animationPlayed:!1,stateText:i.State.WaitPrePare},O.isDownloadClicked||_({type:S,payload:{isDownloadClicked:!0}}),[i.State.WaitForDownload,i.State.WaitPrePare,i.State.EngineStart,i.State.UpdateConfig,i.State.ConfigUpdateBegin].includes(p))return window.aegis.info("downloadMsg: pkgname "+n.pkgname+" \u70b9\u51fb\u4e8b\u4ef6\u88ab return \u6389\u4e86, rawState: "+p),[2];n.isAction=!0,n.isErrorMsgShow=!1,n.isReportInstalling=!1,n.isReportDownLoaded=!1,n.isInstalled=!1,n.isUserHandleOpen=!1,p===i.State.Installed&&(g.stateText=i.State.Installed,n.isInstalled=!0),p===i.State.ConfigUpdateEnd&&(r.task.raw.rawState=i.State.Installed,p=i.State.Installed),p===i.State.Installed&&(n.isUserHandleOpen=!0),n.area&&(n.gameArea=n.area),_({type:I,payload:{key:n.pkgname,value:g}}),function(e,t,n){B(void 0,void 0,void 0,(function(){var r;return W(this,(function(o){switch(o.label){case 0:return[4,b(t,n)];case 1:switch(r=o.sent(),e){case i.State.init:u.haloReport.report("app_download",null,Q(Q(Q({},r),{pkgname:t,button_state:"app_download",standy1:"first"}),{standy1:r.standy1})),window.aegis.info("downloadMsg: pkgname "+t+" \u7ed3\u679c: app_download standy1: "+r.standy1);break;case i.State.DownloadFailed:case i.State.EngineError:u.haloReport.report("app_download",null,Q(Q({},r),{pkgname:t,button_state:"app_download",standy1:"retry"})),window.aegis.info("downloadMsg: pkgname "+t+" \u7ed3\u679c: app_download standy1: retry");break;case i.State.Downloading:case i.State.EngineDownLoading:case i.State.WaitForDownload:u.haloReport.report("app_pause",null,Q(Q({},r),{pkgname:t,button_state:"app_pause"})),window.aegis.info("downloadMsg: pkgname "+t+" \u7ed3\u679c: app_pause");break;case i.State.DownloadPause:case i.State.EngineDownloadPause:u.haloReport.report("app_continue",null,Q(Q(Q({},r),{pkgname:t,button_state:"app_continue",standy1:"first"}),{standy1:r.standy1})),window.aegis.info("downloadMsg: pkgname "+t+" \u7ed3\u679c: app_continue standy1 "+r.standy1);break;case i.State.Installed:u.haloReport.report("app_open",null,Q(Q(Q({},r),{pkgname:t,button_state:"app_open",standy1:"first"}),{standy1:r.standy1})),window.aegis.info("downloadMsg: pkgname "+t+" \u7ed3\u679c: app_open standy1 "+r.standy1),h.delete(t);break;case i.State.CanUpgrade:u.haloReport.report("app_install",null,Q(Q({},r),{pkgname:t,button_state:"app_install",standy1:"update"})),window.aegis.info("downloadMsg: pkgname "+t+" \u7ed3\u679c: app_install standy1: update");break;case i.State.CanInstall:u.haloReport.report("app_install",null,Q(Q({},r),{pkgname:t,button_state:"app_install",standy1:"pureInstall"})),window.aegis.info("downloadMsg: pkgname "+t+" \u7ed3\u679c: app_install standy1: pureInstall")}return[2]}}))}))}(p,n.pkgname,a),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,(y=n,B(void 0,void 0,void 0,(function(){var e,t;return W(this,(function(n){switch(n.label){case 0:return e=new Promise((function(e,t){var n={op:"qryrule",pkgPrefix:y.packageName},r=setTimeout((function(){var t;null===(t=window.aegis)||void 0===t||t.infoAll("downloadMsg: get upgrade timeout (5000ms), url: "+Object(N.y)()+"/bin/node/upgrade "+JSON.stringify(n)),e()}),5e3);Object(z.jsonp)(Object(N.y)()+"/bin/node/upgrade",n).then((function(n){var a;clearTimeout(r);var u=null===(a=null===n||void 0===n?void 0:n.result)||void 0===a?void 0:a.list[0];i.Market.GetClientVersionEx().then((function(n){var r;n&&Object.keys(n).some((function(e){return n[e]&&u&&l.syzsUtil.versionCompare(n[e],u[e]||"")<0}))?(o.z.message({content:"\u60a8\u7684\u624b\u6e38\u52a9\u624b\u7248\u672c\u8fc7\u4f4e\uff0c\u9700\u8981\u66f4\u65b0\u5230\u6700\u65b0\u7248\u672c\u624d\u80fd\u7545\u73a9\u8be5\u6e38\u620f",cancelText:"\u53d6\u6d88",confirmText:"\u7acb\u5373\u66f4\u65b0",onOk:function(){B(void 0,void 0,void 0,(function(){return W(this,(function(e){switch(e.label){case 0:return[4,i.Market.checkHasApi("Market.GetDiagnosticInfo")];case 1:return e.sent()?Object(U.u)(U.c.NEW_AVUS_UserCheckUpdate):i.Market.CheckUpdate(),[2]}}))}))},scene_id:"-13",type:"info"}),null===(r=window.aegis)||void 0===r||r.infoAll("downloadMsg: \u60a8\u7684\u624b\u6e38\u52a9\u624b\u7248\u672c\u8fc7\u4f4e\uff0c\u9700\u8981\u66f4\u65b0\u5230\u6700\u65b0\u7248\u672c\u624d\u80fd\u7545\u73a9\u8be5\u6e38\u620f: clientVersion "+JSON.stringify(n)+" gameObj "+JSON.stringify(u)),t()):e()}))}))})),t=new Promise((function(e,t){var n=y.system_req;n?i.Market.GetCurrentSysState().then((function(r){var o,a=JSON.parse(n)[0];do{if(+a.cpu>+r.cpu.cores)break;if(+a.ram>+r.memory.sizeInMB)break;if(1===r.isWow64&&"64"!==a.sys_type||0===r.isWow64&&"32"!==a.sys_type)break;if(!r.isWow64){i.Market.GetClientVersionEx().then((function(e){var t;null===(t=window.aegis)||void 0===t||t.infoAll("downloadMsg: \u7f3a\u5c11 isWow64 \u5b57\u7aef: appInfo.packageName "+y.packageName+" result: "+JSON.stringify(e))}));break}return e()}while(0);null===(o=window.aegis)||void 0===o||o.infoAll("downloadMsg: \u786c\u4ef6\u4e0d\u7b26\u5408\u8981\u6c42: appInfo.packageName "+y.packageName+" clientVersion "+JSON.stringify(r)+" needSysHardWareConfig "+JSON.stringify(a)),t(),window.$store.routerHistory.push(Object(N.b)(y.packageName)+"&hardWareNoMatch=1")})):e()})),[4,e];case 1:return n.sent(),[4,t];case 2:return n.sent(),[2,!0]}}))})))];case 2:return v.sent(),t(),[3,4];case 3:return v.sent(),g.stateText=p,_({type:I,payload:{key:n.pkgname,value:g}}),[3,4];case 4:return[2]}var y}))}))},G=function(){return(G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},F=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},V=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},X=function(){return(X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},K=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},$=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Z=function(){return(Z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Y=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},ee=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},te=function(e,t,n,r){return Y(void 0,void 0,void 0,(function(){var o,a,c,s,l,d,f,p,g,v,w,m,k,S,N,x,E,q;return ee(this,(function(L){switch(L.label){case 0:switch(o=e.data,a=o.raw,c=void 0===a?{}:a,s=o.progress,l=o.key,d=c.rawState,f=c.totalSize,p=c.downloadedSize,g=c.downloadSpeed,v=c.comId,w=O.downLoadQueue,m=(+f-+p)/g,k="",0!==g&&m&&m>0&&(k=function(e){return"\u5269\u4f59 "+y(e>=3600?Math.floor(e/3600):0)+":"+y((e>=3600?e%3600:e)>=60?Math.floor((e>=3600?e%3600:e)/60):0)+":"+y(Math.floor(e>=60?e%60:e))}(m)),S={state:0,stateText:!(null===(E=w[n.pkgname])||void 0===E?void 0:E.isNeedUpdate)&&!(null===(q=w[n.pkgname])||void 0===q?void 0:q.isNeedUpdateEngine)||[i.State.Uninstalling,i.State.EndUninstall].includes(d)?d:i.State.CanUpgrade,comId:v,comText:"",downloadedSize:Number(p)||0,totalSize:Number(f)||0,downloadSpeed:Number((null!==g&&void 0!==g?g:0)/1024/1024).toFixed(2)+"Mb/s",packageName:l,remainingTime:k,req:c.req,showInDownLoadBox:!0},(N=Number(s/10))&&Number.isFinite(N)&&(S.percent=N>=100?"100":N.toFixed(0)),d){case i.State.EndUninstall:return[3,1];case i.State.EngineError:case i.State.DownloadFailed:return[3,3];case i.State.CompareMD5:return[3,4];case i.State.Downloading:case i.State.EngineInstalling:return[3,5];case i.State.ConfigUpdateEnd:return[3,6]}return[3,7];case 1:return[4,b(n.pkgname,r)];case 2:return x=L.sent(),u.haloReport.report("app_uninstalled",null,Z(Z({},x),{pkgname:n.pkgname,button_state:"app_uninstalled"})),S.percent="0",h.delete(n.pkgname),[3,8];case 3:return S.animationPlayed=!1,[3,8];case 4:return n.isAction||(S.rawState=i.State.init),[3,8];case 5:return 0===S.downloadedSize&&0===S.totalSize&&(S.stateText=i.State.WaitPrePare),[3,8];case 6:return n.isInstalled&&(S.stateText=i.State.Installed),[3,8];case 7:return[3,8];case 8:return window.aegis.info("downloadMsg: pkgname "+n.pkgname+" \u7ed3\u679c: state \u53d8\u66f4 stateText: "+JSON.stringify(S.stateText)+" percent "+S.percent+" downloadedSize "+S.downloadedSize+" totalSize "+S.totalSize+" downloadSpeed "+S.downloadSpeed),_({type:d===i.State.init?j:I,payload:{key:n.pkgname,value:S}}),t(),[2]}}))}))},ne=function(){return(ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},re=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},oe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},ae=function(){return(ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ie=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},ue=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function ce(e,t){t&&(v[e]=t)}function se(e){return ie(this,void 0,void 0,(function(){var t,n,r,c,s,l,d=this;return ue(this,(function(f){switch(f.label){case 0:return t=e.defaultshowInBox,n=void 0!==t&&t,function(e){var t=e.data;return!!t.pkgname&&!L.includes(t.pkgname)}(e)?[4,R(e)]:[2,!0];case 1:return r=f.sent(),s=new a.AppDownloader(r),r.autoDownLoadArea&&(s.task.req.autoDownLoadArea=r.autoDownLoadArea),s.use({action:function(e,t){return ie(d,void 0,void 0,(function(){return ue(this,(function(n){return H(e,t,r,s,c),[2]}))}))},state:function(e,t){return ie(d,void 0,void 0,(function(){return ue(this,(function(n){return te(e,t,r,c),[2]}))}))},pending:function(e,t){return ie(d,void 0,void 0,(function(){return ue(this,(function(e){return function(e,t,n,r){K(void 0,void 0,void 0,(function(){var e;return $(this,(function(o){switch(o.label){case 0:return[4,b(n.pkgname,r)];case 1:return e=o.sent(),n.isAction&&u.haloReport.report("app_queue",null,X(X({},e),{pkgname:n.pkgname,button_state:"app_queue"})),window.aegis.info("downloadMsg: pkgname "+n.pkgname+" \u7ed3\u679c: app_queue"),t(),[2]}}))}))}(0,t,r,c),[2]}))}))},downloaded:function(e,t){return ie(d,void 0,void 0,(function(){return ue(this,(function(e){return function(e,t,n,r){F(void 0,void 0,void 0,(function(){var e,o,a,i;return V(this,(function(c){switch(c.label){case 0:return[4,b(n.pkgname,r)];case 1:return e=c.sent(),o=O.downLoadQueue,n.isAction&&!n.isReportDownLoaded&&(n.isReportDownLoaded=!0,u.haloReport.report("app_downloaded",null,G(G({},e),{pkgname:n.pkgname,button_state:"app_downloaded",standy1:(null===(a=o[n.pkgname])||void 0===a?void 0:a.isNeedUpdate)||(null===(i=o[n.pkgname])||void 0===i?void 0:i.isNeedUpdateEngine)?"update":"first"})),window.aegis.info("downloadMsg: pkgname "+n.pkgname+" \u7ed3\u679c: app_downloaded")),t(),[2]}}))}))}(0,t,r,c),[2]}))}))},installing:function(e,t){return ie(d,void 0,void 0,(function(){return ue(this,(function(e){return function(e,t,n,r){M(void 0,void 0,void 0,(function(){var e;return C(this,(function(o){switch(o.label){case 0:return[4,b(n.pkgname,r)];case 1:return e=o.sent(),n.isReportInstalling||(n.isReportInstalling=!0,u.haloReport.report("app_installing",null,D(D({},e),{pkgname:n.pkgname,button_state:"app_installing"}))),window.aegis.info("downloadMsg: pkgname "+n.pkgname+" \u7ed3\u679c: app_installing"),t(),[2]}}))}))}(0,t,r,c),[2]}))}))},error:function(e,t){return ie(d,void 0,void 0,(function(){return ue(this,(function(n){return function(e,t,n,r){J(void 0,void 0,void 0,(function(){var a,c,s,l,d,f;return P(this,(function(p){switch(p.label){case 0:return a=e.downloader,c=a.task,s=c.raw,l=(void 0===s?{}:s).rawState,d=O.downLoadQueue,[4,b(n.pkgname,r)];case 1:return f=p.sent(),n.isAction&&!n.isErrorMsgShow&&(n.isErrorMsgShow=!0,l===i.State.LocalInstallPathError?(o.z.message({content:"\u672c\u5730\u5b89\u88c5\u6e38\u620f\u5df2\u635f\u574f\uff0c\u5b89\u88c5\u5931\u8d25\uff01\u8bf7\u91cd\u65b0\u5b89\u88c5\u6e38\u620f",confirmText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",scene_id:"-17"}),window.JsBridge.deletePackage({packageName:n.pkgname})):o.z.message({content:"\u6e38\u620f\u4e0b\u8f7d\u5931\u8d25, \u8bf7\u91cd\u8bd5",confirmText:"\u91cd\u8bd5",cancelText:"\u53d6\u6d88",onOk:function(e){return d[n.pkgname].handerFunc.doAction(null===e||void 0===e?void 0:e.target)},scene_id:"-12"}),u.haloReport.report("app_download_faild",null,A(A({},f),{pkgname:n.pkgname,button_state:"app_download_faild"}))),window.aegis.info("downloadMsg: pkgname "+n.pkgname+" \u7ed3\u679c: app_download_faild rawState: "+l),t(),[2]}}))}))}(e,t,r,c),[2]}))}))},installed:function(e,t){return ie(d,void 0,void 0,(function(){return ue(this,(function(e){return function(e,t,n,r){re(void 0,void 0,void 0,(function(){var e,a,i,c;return oe(this,(function(s){switch(s.label){case 0:return[4,b(n.pkgname,r)];case 1:return e=s.sent(),a=O.downLoadQueue,n.isAction&&(u.haloReport.report("app_installed",null,ne(ne({},e),{pkgname:n.pkgname,button_state:"app_installed",standy1:(null===(i=a[n.pkgname])||void 0===i?void 0:i.isNeedUpdate)||(null===(c=a[n.pkgname])||void 0===c?void 0:c.isNeedUpdateEngine)?"update":"first"})),Object(o.bb)(n.pkgname),_({type:I,payload:{key:n.pkgname,value:{isInstalled:!0}}})),window.aegis.info("downloadMsg: pkgname "+n.pkgname+" \u7ed3\u679c: app_installed"),t(),[2]}}))}))}(0,t,r,c),[2]}))}))}}),l={type:j,payload:{key:r.pkgname,value:{state:0,stateText:i.State.init,comId:0,comText:"",downloadedSize:0,totalSize:0,downloadSpeed:"0Mb/s",percent:"0",packageName:r.pkgname,remainingTime:"",req:r,handerFunc:{doAction:function(e){return ie(d,void 0,void 0,(function(){var t,n,a,l;return ue(this,(function(d){switch(d.label){case 0:return c=e,(null===(a=O.downLoadQueue[r.pkgname])||void 0===a?void 0:a.isNeedUpdate)?(t=function(){i.Market.updatePackageNew({id:r.pkgname,adtag:"",updateJson:"",preload:!1,isLocalInstall:!!r.isLocalInstall,packageSize:r.size,localApkPath:r.localApkPath,area:""})},r.isLocalInstall?(o.z.message({content:"\u68c0\u6d4b\u5230\u6b64\u6e38\u620f\u5728\u5e73\u53f0\u6709\u5b98\u65b9\u7248\u672c\uff0c\u662f\u5426\u4e0b\u8f7d\u5b98\u65b9\u7248\u672c?",cancelText:"\u53d6\u6d88",confirmText:"\u786e\u8ba4",onOk:function(){t()},onCancel:function(e){null===e||void 0===e||e.stopPropagation(),i.Market.launchPackage(r.pkgname,"")},scene_id:"-16",type:"info"}),window.aegis.infoAll("downloadMsg: \u68c0\u6d4b\u5230\u6b64\u6e38\u620f\u5728\u5e73\u53f0\u6709\u5b98\u65b9\u7248\u672c\uff0c\u662f\u5426\u4e0b\u8f7d\u5b98\u65b9\u7248\u672c? AppDownloadTaskRequest.pkgname "+r.pkgname),[2]):(t(),_({type:I,payload:{key:r.pkgname,value:{isNeedUpdate:!1}}}),[4,b(r.pkgname,c)])):[3,2];case 1:return n=d.sent(),u.haloReport.report("app_install",null,ae(ae({},n),{pkgname:r.pkgname,button_state:"app_install",standy1:"update"})),[3,5];case 2:return(null===(l=O.downLoadQueue[r.pkgname])||void 0===l?void 0:l.isNeedUpdateEngine)?(i.Market.changeEngineNew({id:r.pkgname,adtag:"",updateJson:"",preload:!1,isLocalInstall:!!r.isLocalInstall,packageSize:r.size,localApkPath:r.localApkPath,area:""}),_({type:I,payload:{key:r.pkgname,value:{isNeedUpdateEngine:!1}}}),[4,b(r.pkgname,c)]):[3,4];case 3:return n=d.sent(),u.haloReport.report("app_install",null,ae(ae({},n),{button_state:"app_install",standy1:"update"})),[3,5];case 4:s.action(),d.label=5;case 5:return[2]}}))}))},cancelInstall:function(e){return window.JsBridge.cancelInstall(e)},deletePackage:function(e){o.z.message({content:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u6e38\u620f\u5417\uff1f\u4ee5\u540e\u53ef\u4ee5\u5728\u6e38\u620f\u5e93\u91cd\u65b0\u4e0b\u8f7d\u3002",cancelText:"\u53d6\u6d88",confirmText:"\u786e\u8ba4",onOk:function(t){t&&t.stopPropagation(),c=null===t||void 0===t?void 0:t.target;var n=O.downLoadQueue[e.packageName].req;e.isPcGame=w(n)&&!e.alwaysCallDeleteNormalTask,window.JsBridge.deletePackage(e)},onCancel:function(e){return e&&e.stopPropagation()},scene_id:"-14",type:"info"}),window.aegis.infoAll("downloadMsg: \u786e\u5b9a\u8981\u5220\u9664\u8be5\u6e38\u620f\u5417\uff1f\u4ee5\u540e\u53ef\u4ee5\u5728\u6e38\u620f\u5e93\u91cd\u65b0\u4e0b\u8f7d? AppDownloadTaskRequest.pkgname "+r.pkgname)}},showInDownLoadBox:n}}},_(l),[2,!0]}}))}))}var le=function(){return(le=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function de(e){var t=function(e){var t=Object(c.useState)(Math.random()),n=t[0],r=t[1];return Object(c.useEffect)((function(){var t=function(){r(Math.random())};return k[e]||(k[e]=[]),k[e].push(t),function(){var n=k[e].indexOf(t);n>-1&&k[e].splice(n,1)}}),[e]),n}(e||"ALL"),n=Object(c.useState)(e?O.downLoadQueue[e]||O.freezeDownLoadQueue[e]||{}:O),r=n[0],o=n[1],a=Object(c.useRef)(),i=Object(c.useRef)();return Object(c.useEffect)((function(){if(O){var t={freezeDownLoadQueue:{}},n={};if(e){if(t=le(le({},O.freezeDownLoadQueue[e]||{}),O.downLoadQueue[e]),n=le(le({},t),{req:{},handerFunc:{}}),JSON.stringify(n)===a.current)return;a.current=JSON.stringify(n),o(t)}else{if(n=le(le({},O),{freezeDownLoadQueue:{}}),JSON.stringify(n)===i.current)return;i.current=JSON.stringify(n),o(l._.cloneDeepWith(n))}}}),[t]),Object(c.useEffect)((function(){o(e?O.downLoadQueue[e]||O.freezeDownLoadQueue[e]||{}:O)}),[e]),r}var fe,pe=n("ld/X"),ge=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},he=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};!function(e){e[e.success=0]="success",e[e.getAppInfoError=1]="getAppInfoError"}(fe||(fe={}));var ve=[],ye=function(){var e=Object(pe.n)().downLoadQueue,t=Object(c.useRef)({});Object(pe.u)({eventName:"outMarketFrameworkCallDownLoad",listener:function(e){return ge(void 0,void 0,void 0,(function(){var t,n;return he(this,(function(r){return t=e.pkgName,n=e.scene_context,ve.includes(t)||ve.push(t),Object(pe.f)("callDownLoadWithPkgName",{pkgName:t,canMultipleTrigger:!0,reportContextData:{card_id:"outMarketFrameworkCallDownLoad",scene_id:"-18",standy1:"first",scene_context:new URLSearchParams(n).toString()}}),[2]}))}))}}),Object(c.useEffect)((function(){Object.keys(e).forEach((function(n){if(ve.includes(n)&&JSON.stringify(e[n])!==JSON.stringify(t.current[n]||{})){var r={pkgName:n,data:{code:fe.success,downLoadData:e[n]}};i.Ipc.BroadCastMessage(JSON.stringify({type:"externalCallDownLoadDataChange",message:r})),t.current[n]=JSON.parse(JSON.stringify(e[n]))}}))}),[e])},we=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},be=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},me=[],ke=function(){var e=O.downLoadQueue,t=O.freezeDownLoadQueue;Object(pe.u)({eventName:"callDownLoadWithPkgName",listener:function(n){return we(void 0,void 0,void 0,(function(){var r,o,a,u,c,s,l,d,f;return be(this,(function(p){switch(p.label){case 0:return r=n.pkgName,o=n.autoDownLoadArea,a=n.supplyid,u=n.canMultipleTrigger,c=void 0!==u&&u,s=n.reportContextData,me.includes(r)&&!c?[2]:(null===(f=e[r])||void 0===f?void 0:f.stateText)!==i.State.Installed||c?(l=function(){var o=e[r]||t[r];if(c)Object(pe.h)(r,s),o.handerFunc.doAction();else{if(![i.State.init,i.State.DownloadPause,i.State.CanUpgrade,i.State.CanInstall,i.State.EndUninstall,i.State.EngineDownloadPause,i.State.DownloadFailed,i.State.EngineError].includes(o.stateText))return;Object(pe.h)(r,s),o.handerFunc.doAction(),me.push(r)}window.aegis.infoAll("downloadMsg: callDownLoadWithPkgName already running: params "+JSON.stringify(n))},e[r]||t[r]?[3,3]:[4,Object(N.c)(r)]):[2];case 1:return(d=p.sent())[r]?(o&&(d[r].autoDownLoadArea=o),[4,Object(pe.d)({data:d[r],defaultshowInBox:!0,supplyid:a})]):(window.aegis.report("downloadMsg: \u81ea\u52a8\u4e0b\u8f7d\u5931\u8d25, \u67e5\u4e0d\u5230\u5305\u540d: "+r),[2]);case 2:return p.sent(),l(),[3,4];case 3:l(),p.label=4;case 4:return[2]}}))}))}})}},HJca:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("Hd7B"),o=n("ohty"),a=n("q1tI"),i=n("ld/X"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},c=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function s(){return u(this,void 0,void 0,(function(){var e;return c(this,(function(t){return e=Object(i.r)().userInfo,Object(a.useEffect)((function(){e&&Object(o.getCookie)("livelink_openid")!==e.openid&&Object(r.w)(e).then((function(){Object(i.f)("livedetail_login")}))}),[e]),[2]}))}))}},JSwJ:function(e,t,n){"use strict";n("q1tI")},NfhE:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return u}));var r=n("q1tI"),o={};function a(e,t){var n=o[e]||[];n.push(t),o[e]=n}function i(e){var t=Object(r.useCallback)((function(t,n){e.listener(t,n)}),[e.eventName,e.listener]);Object(r.useEffect)((function(){return a(e.eventName,t),function(){!function(e,t){var n=o[e],r=n.indexOf(t);r>-1&&n.splice(r,1)}(e.eventName,t)}}),[e.eventName,e.listener])}function u(e,t,n){var r=o[e];r&&r.forEach((function(e){e(t,n)}))}},SDGs:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("q1tI");function o(e,t,n,o){void 0===n&&(n=window);var a=Object(r.useRef)();Object(r.useEffect)((function(){a.current=t}),[t]),Object(r.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return a.current(e)};return n.addEventListener(e,t,o),function(){n.removeEventListener(e,t)}}}),[e,n])}},"Sh+m":function(e,t,n){"use strict";n("q1tI")},VH9R:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r,o=n("Hd7B"),a=n("uR+Q"),i=n("/UZO"),u=n("Uh3X"),c=n("U0ZW"),s=n("ohty"),l=n("q1tI"),d=n("W0uf"),f=n("WuPj"),p=n("NfhE"),g=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},h=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};!function(e){e.WX="WX",e.QC="QC",e.FB="fb",e.GG="gg"}(r||(r={}));var v=Object(o.i)()+"/v2/syzsoperate",y=0,w={},b=function(){c.haloReport.refreshUserInfo(),Object.keys(w).forEach((function(e){w[e].onLoginIn()}))},m=function(){c.haloReport.refreshUserInfo(),Object.keys(w).forEach((function(e){w[e].onLogout()}))};i.tgbEventBus.$on("Market.UserLogout",(function(){return g(void 0,void 0,void 0,(function(){return h(this,(function(e){return Object.keys(w).forEach((function(e){w[e].onLogout()})),[2]}))}))})),i.tgbEventBus.$on("Ipc.SendMessage",(function(e){return g(void 0,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:if(!e.message)return[3,9];n.label=1;case 1:switch(n.trys.push([1,8,,9]),t=JSON.parse(e.message),t.type){case d.a.Login:return[3,2];case d.a.Logout:return[3,5]}return[3,6];case 2:return[4,Object(d.f)()];case 3:return n.sent(),[4,Object(d.c)(!0)];case 4:return n.sent(),i.Market.ChinaLoginCallback({result:1,openid:Object(s.getCookie)("openid"),platform:"QC"===Object(s.getCookie)("logintype")?"qq":"weixin",accesstoken:Object(s.getCookie)("accesstoken")}),b(),c.haloReport.report(c.REPORT_EVENT.LOGIN),[3,7];case 5:return i.Market.ChinaLogoutCallback(),m(),c.haloReport.report(c.REPORT_EVENT.LOGOUT),[3,7];case 6:n.label=7;case 7:return[3,9];case 8:return n.sent(),[3,9];case 9:return[2]}}))}))})),i.tgbEventBus.$on("Ipc.BroadCastMessage",(function(e){return g(void 0,void 0,void 0,(function(){var t;return h(this,(function(n){if(e.message)try{(t=JSON.parse(e.message))&&"OverseaLogin"===t.action?b():t&&"logout"===t.type&&m()}catch(e){}return[2]}))}))})),i.tgbEventBus.$on("Market.OverseaLogin",(function(e){return g(void 0,void 0,void 0,(function(){return h(this,(function(e){return[2]}))}))})),i.tgbEventBus.$on("Market.OverseaLogout",(function(e){return g(void 0,void 0,void 0,(function(){return h(this,(function(e){return[2]}))}))}));var k=function(){return g(void 0,void 0,void 0,(function(){var e,t,n,r,a,i;return h(this,(function(c){switch(c.label){case 0:return"WX"===Object(s.getCookie)("logintype")&&Object(s.getCookie)("refreshtoken")?((e=JSON.parse(JSON.stringify(f.a))).body.OperateId="AccessTokenRefresh",e.head.requestId=(~~(1e8*Math.random())).toString(),e.head.userInfo.guid=s.storage.getItem("guid"),[4,Object(u.ajax)({url:v,method:"POST",dataJSON:e})]):[3,5];case 1:t=c.sent(),c.label=2;case 2:if(c.trys.push([2,4,,5]),0!==t.Ret)throw new Error("AccessTokenRefreshError data: "+JSON.stringify(t));return(n=JSON.parse(t.ErrMsg)).AccessToken&&Object(s.setCookie)("accesstoken",n.AccessToken,"qq.com","/",2),n.RefreshToken&&Object(s.setCookie)("refreshtoken",n.RefreshToken,"qq.com","/",696),[4,Object(o.w)({loginType:Object(s.getCookie)("logintype"),openid:Object(s.getCookie)("openid"),accessToken:n.AccessToken})];case 3:return c.sent(),Object(p.a)("livedetail_login"),null===(a=window.aegis)||void 0===a||a.infoAll("loginType: WX refresh_token and liveDetail refresh_token success"),[3,5];case 4:return r=c.sent(),null===(i=window.aegis)||void 0===i||i.infoAll("loginType: WX refresh_token error "+r+" data "+JSON.stringify(t)),[3,5];case 5:return[2]}}))}))};function O(){var e=function(){return Object(s.getCookie)("logintype")?{loginType:Object(s.getCookie)("logintype"),headimgurl:decodeURIComponent(Object(s.getCookie)("headimgurl")||Object(s.getCookie)("over_sea_picture")),nickname:decodeURIComponent(Object(s.getCookie)("nickname")||Object(s.getCookie)("over_sea_nickname")),openid:Object(s.getCookie)("openid"),accessToken:Object(s.getCookie)("accessToken")||Object(s.getCookie)("accesstoken")}:null},t=Object(l.useState)(e()),n=t[0],r=t[1],o=Object(l.useContext)(a.d).Locale;y+=1;var i=Object(l.useRef)(y),u=function(){r(null)},c=function(){r(e())};return Object(l.useEffect)((function(){return w[i.current]={onLogout:u,onLoginIn:c},c(),function(){delete w[i.current]}}),[]),{userInfo:n,checkLogin:d.b,login:function(){Object(d.e)(!1),Object(d.d)("zh_CN"===o)},logout:d.e}}k(),setInterval((function(){k()}),54e5)},WBBd:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n("Hd7B"),o=n("ld/X"),a=n("uR+Q"),i=n("wz3H"),u=n.n(i),c=n("fNN2"),s=n("ohty"),l=n("q1tI"),d=n.n(l),f=n("Ty5D"),p=n("0Fbi"),g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=Object(r.i)()+"/v2/syzsdynamic",v={head:{cmd:"syzsdynamic",userInfo:{guid:"",qimei:"",imei:"",uuid:"",evilScore:0},authInfo:{businessId:"AuthName",signature:"",appId:"0",A2:[],uin:0,qqOpenId:"",weixinAccessToken:"",weixinOpenId:"",nonce:Number(Math.random().toString().slice(-8)),UserIpv4:""},hostAppInfo:{pkgName:"",versionName:"",versionCode:0,appKey:"",userId:"",channel:"",appChannelId:"",scene:""},deviceInfo:{mid:"",imei1:"",imsi1:"",imei2:"",imsi2:"",macAddr:"",xResolution:0,yResolution:0,brand:"",mode:"",manufacturer:"",product:"",platform:0,phone:""},netInfo:{netType:0,ipv4:"",ipv6:"",wifiSsid:"",wifiBssid:""},httpHeadInfo:{},protocol:0,milliSecond:+new Date,lbsInfo:{latitude:0,longitude:0,accuracy:0,cityCode:0,province:"",city:"",district:"",street:""},qua:"",whiteBoard:0,requestId:""},body:{cookies:{"":""},layout:"",bid:"syzs",request_id:"",pageIndex:0,scene:0,headers:{"":""},context:{list_s:{},list_i:{"":[0]}},query:{offset:"0",pagecount:"0"},pageId:"",dynamicLayoutHead:{terminal:{macAdress:"",language:"",osType:"",androidId:"",imei:"",osVersion:""},entry:{province_code:0,country:"",carrier_code:0,longitude:"",gateway_ip:"",city_code:0,latitude:"",timezone:"",gateway_ipv6:""},login:{qq:"",qua:"",guid:"",wx_openid:"",qq_openid:""},track:{via:"",from_scene:0,from_requestid:0},net:{ipType:2,nacMode:0,extNetworkOperator:"",isWap:0,nacModeStr:"",netType:0,clientIp:"",wifiBssid:"",clientIpv6:"",wifiSsid:"",extNetworkType:0}}}};function y(e){return Object.keys(e).filter((function(t){return!d.a.isValidElement(e[t])&&"offset"!==t})).map((function(t){return"@"+t+"="+JSON.stringify(e[t])})).join(",")}var w=function(e){var t=e.sceneName,n=e.pagecount,r=void 0===n?0:n,i=e.offset,d=void 0===i?0:i,w=e.layout,b=void 0===w?"":w,m=e.context,k=e.replace,O=e.swOption,S=Object(l.useContext)(a.r),I=S.store,j=S.actions,_=Object(l.useRef)({}),N=Object(l.useRef)({sw_cache_mod:"swr",sw_cache_keep:"300000"}),x=s._.getHashQuery();Object(f.g)(),Object(l.useMemo)((function(){_.current=JSON.parse(JSON.stringify(v)),_.current.head.hostAppInfo.scene=t,_.current.body.layout=b,_.current.body.query.pagecount=String(r),_.current.body.context=s._.merge(_.current.body.context,JSON.parse(JSON.stringify(m||{}))),_.current.head.requestId=(~~(1e8*Math.random())).toString(),_.current.head.milliSecond=0,_.current.body.context.list_s.trace_id=[Object(c.getPageData)().last_trace_id||""]}),[m,b,r,t]),N.current.sw_cache_keep=(null===O||void 0===O?void 0:O.sw_cache_keep)||"30000",N.current.sw_cache_mod=(null===O||void 0===O?void 0:O.sw_cache_mod)||"swr",N.current.sw_retry_time=null===O||void 0===O?void 0:O.sw_retry_time,_.current.head.userInfo.guid=s.storage.getItem("guid"),_.current.body.query.offset=String(d);var E=u()({url:h+"?scene="+e.sceneName,method:"post",dataJSON:_.current,swOption:N.current},{revalidateOnMount:!1}),q=E.data,L=E.isValidating,R=E.error,T=E.revalidate;Object(o.G)("useDynCardRequest",{params:y(e),query:x}),Object(l.useEffect)((function(){var n,o,a,i;if(q){var u=q.swTime;if(0===q.code){var c,s=JSON.parse(JSON.stringify((null===I||void 0===I?void 0:I.pageMap[t])||{})),l=s.components,f=s.report_info,h=q.data.errors,v=q.data.components;if(Array.isArray(h)&&h.length>0&&(h.forEach((function(e){var t;null===(t=window.aegis)||void 0===t||t.report("\u7ec4\u5361\u670d\u52a1\u5361\u7247\u9519\u8bef\u4e0a\u62a5\u7edf\u8ba1, scene:"+_.current.head.hostAppInfo.scene+",cardid: "+e.cardId)})),null===(o=window.aegis)||void 0===o||o.report("\u7ec4\u5361\u670d\u52a1\u8fd4\u56de\u9519\u8bef, requestId: "+_.current.head.requestId+" isSw: "+(u&&u>0)+" request:"+JSON.stringify(_.current)+" ,errors "+JSON.stringify(h))),!v||0===v.length)return;v.forEach((function(t){var n,r,o=h.filter((function(e){return e.cardId===t.cardId}));Object.assign(t,{swTime:u},o[0]||{}),t.errcode&&0!==t.errcode&&(null===(n=window.aegis)||void 0===n||n.report("\u7ec4\u5361\u670d\u52a1\u5361\u7247\u9519\u8bef\u4e0a\u62a5\u7edf\u8ba1, scene:"+_.current.head.hostAppInfo.scene+",errors "+t.errcode),null===(r=window.aegis)||void 0===r||r.report("\u7ec4\u5361\u670d\u52a1\u5361\u7247\u9519\u8bef, requestId: "+_.current.head.requestId+" isSw: "+(u&&u>0)+" request:"+y(e)+" ,errors "+t.errcode+","+t.errmsg))}));var w=function(){if(!k&&l){if(b)return c=JSON.parse(JSON.stringify(l)),Object(p.a)(c,v[0]),"break";if(d>1&&r){var e=(d-1)*r;return(c=JSON.parse(JSON.stringify(l))).length=Math.max(c.length,e+v.length),v.forEach((function(t,n){c[e+n]=t})),"break"}}c=v,f=q.data.report_info};do{if("break"===w())break}while(0);s=g(g({},q.data),{report_info:f,size:q.size,components:c,offset:_.current.body.query.offset}),null===j||void 0===j||j.updatePageAction({pageMap:(n={},n[t]=s,n)})}else null===(a=window.aegis)||void 0===a||a.report("\u7ec4\u5361\u670d\u52a1\u8fd4\u56de\u9519\u8bef\u4e0a\u62a5\u7edf\u8ba1, scene:"+_.current.head.hostAppInfo.scene+",errors "+JSON.stringify(q)),null===(i=window.aegis)||void 0===i||i.report("\u7ec4\u5361\u670d\u52a1\u8fd4\u56de\u9519\u8bef, requestId: "+_.current.head.requestId+" isSw: "+(u&&u>0)+" request:"+JSON.stringify(_.current)+" ,errors "+JSON.stringify(q))}}),[JSON.stringify(q)]);return{requestData:_.current,data:q,doRequest:function(){T()},isValidating:L,error:R}}},WuPj:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n("Hd7B"),o=n("wz3H"),a=n.n(o),i=n("ohty"),u=n("q1tI"),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=Object(r.i)()+"/v2/syzsoperate",l={head:{cmd:"syzsoperate",userInfo:{guid:"",qimei:"",imei:"",uuid:"",evilScore:0},authInfo:{businessId:"AuthName",signature:"",appId:"0",A2:[],uin:0,qqOpenId:"",weixinAccessToken:"",weixinOpenId:"",nonce:Number(Math.random().toString().slice(-8)),UserIpv4:""},hostAppInfo:{pkgName:"",versionName:"",versionCode:0,appKey:"",userId:"",channel:"",appChannelId:"",scene:""},deviceInfo:{mid:"",imei1:"",imsi1:"",imei2:"",imsi2:"",macAddr:"",xResolution:0,yResolution:0,brand:"",mode:"",manufacturer:"",product:"",platform:0,phone:""},netInfo:{netType:0,ipv4:"",ipv6:"",wifiSsid:"",wifiBssid:""},httpHeadInfo:{},protocol:0,milliSecond:0,lbsInfo:{latitude:0,longitude:0,accuracy:0,cityCode:0,province:"",city:"",district:"",street:""},qua:"",whiteBoard:0,requestId:""},body:{Bid:"syzs",OperateId:"",Param:"",User:{},listS:{},listI:{}}},d=function(e){var t=Object(u.useRef)({}),n=Object(u.useState)(null)[1];Object(u.useMemo)((function(){t.current=JSON.parse(JSON.stringify(l)),t.current.body.OperateId=e.OperateId,t.current.body.listS=c({},null===e||void 0===e?void 0:e.listS),t.current.body.listI=c({},null===e||void 0===e?void 0:e.listI),t.current.head.requestId=(~~(1e8*Math.random())).toString(),n({})}),[JSON.stringify(e)]),t.current.head.userInfo.guid=i.storage.getItem("guid");var r=a()({url:s,method:"post",dataJSON:t.current,swOption:{sw_cache_mod:"swr",sw_cache_keep:"30"}},{revalidateOnMount:!1}),o=r.data,d=r.isValidating,f=r.error,p=r.revalidate;return{data:o,doRequest:function(){p()},isValidating:d,error:f}}},X2Fy:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("q1tI"),o=n("ld/X");function a(e,t){var n=Object(r.useState)(!1),a=n[0],i=n[1];return Object(r.useEffect)((function(){e()}),[]),Object(o.q)(e,a?t:0),{start:function(){return i(!0)},stop:function(){return i(!1)}}}},Ykt8:function(e,t,n){"use strict";n("q1tI")},alf8:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("q1tI");function o(e,t){void 0===t&&(t=300);var n=Object(r.useState)(e),o=n[0],a=n[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){a(e)}),t);return function(){clearTimeout(n)}}),[e,t]),o}},fvSL:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("q1tI");function o(e,t){var n=Object(r.useRef)(),o=n.current,a=t(o,e);return Object(r.useEffect)((function(){a||(n.current=e)})),a?o:e}},gKES:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("Hd7B"),o=n("ld/X"),a=n("q1tI"),i=n("0fOR"),u=n("l7JW"),c=Object(r.i)()+"/v2/syzssource",s=parseInt(sessionStorage.getItem("syzs_dyn_uuid")||"0",10);function l(e){return function(t){if(!t||0!==t.Ret)return null;var n=(t.Queue.find((function(t){return t.Name===e}))||{}).Item;if(!n)return null;var r={data:n.map((function(e){return JSON.parse(e.Material.Value)})),size:0,code:t.Ret};return r.data.length>0&&(r.size=r.data[0].cnt),r}}s||(s=parseInt(""+Date.now()+1e5*Math.random(),10),sessionStorage.setItem("syzs_dyn_uuid",s.toString()));var d=function(e){var t=e.sceneName,n=void 0===t?"":t,r=e.listS,s=void 0===r?{}:r,d=e.listI,f=void 0===d?{}:d,p=e.param,g=e.queue,h=e.watchScroll,v=void 0===h||h,y=Object(a.useState)(0),w=y[0],b=y[1];Object(a.useMemo)((function(){b(0)}),[JSON.stringify(s),JSON.stringify(f),p]);var m=Object(o.w)({sceneName:n,listI:f,listS:s,offset:w,pagecount:20,param:p,opt:{url:c,method:"post"},config:{revalidateOnMount:!1},formatData:l(g)}),k=m.requestData,O=m.data,S=m.pageData,I=m.isValidating,j=m.error,_=m.revalidate,N=Object(a.useRef)({data:O,isValidating:I,offset:w,pageData:S,setOffset:b});N.current.data=O,N.current.pageData=S,N.current.isValidating=I,N.current.offset=w,N.current.setOffset=b,Object(u.a)("useScrollPageList",{params:e,listS:s,listI:f,offset:w}),Object(a.useEffect)((function(){_()}),[JSON.stringify(s),JSON.stringify(f),JSON.stringify(p),w]);var x=Object(i.a)({callbackFunc:function(e){v&&!N.current.isValidating&&(N.current.pageData.list.length>=N.current.pageData.size||e.scrollHeight-e.height-e.top<2*window.innerHeight&&b(N.current.pageData.list.length))},delay:10}).trigger;return Object(a.useMemo)((function(){x()}),[JSON.stringify(S)]),{requestData:k,data:O,pageData:S,revalidate:_,isValidating:I,error:j}}},i19C:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("q1tI"),o=new Map;function a(e){var t=Object(r.useState)({loaded:!1,error:!1}),n=t[0],a=t[1];return Object(r.useEffect)((function(){var t=o.get(e);t||(t=function(e){return new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.async=!0;r.addEventListener("load",(function(){return t()})),r.addEventListener("error",(function(){r.remove(),n()})),document.body.appendChild(r)}))}(e),o.set(e,t)),t.then((function(){a({loaded:!0,error:!1})})).catch((function(){o.has(e)&&o.delete(e),a({loaded:!0,error:!0})}))}),[e]),[n.loaded,n.error]}},jgmw:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("uR+Q"),o=n("q1tI");function a(e,t){for(var n=Object(o.useContext)(r.d).l,a=[],i=e;0!==i;)a.push(i%t.diffNum),i=~~(i/t.diffNum);0===a.length&&a.push(0);var u=n("numUnit"+(a.length-1));return""+a[a.length-1]+u}},l7JW:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("q1tI"),o=function(e,t){Object(r.useRef)();Object(r.useEffect)((function(){}))}},nkqQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("uR+Q"),o=n("ohty"),a=n("q1tI");function i(){var e,t=Object(a.useContext)(r.r).store,n=t.routerHistory,i=Object(a.useRef)({history:t.routerHistory,query:Object(o.parseQuery)(n.location.search),search:n.location.search,pathname:n.location.pathname,lastPath:""}),u=n.location.pathname.split("/").filter((function(e){return e}));return e=u[u.length-1]||"",i.current={history:t.routerHistory,query:Object(o.parseQuery)(n.location.search),search:n.location.search,pathname:n.location.pathname,lastPath:e},i.current}},nlyf:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("q1tI"),o=n("ohty");function a(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),a=e.fixedTop;return Object(r.useEffect)((function(){var e=o._.throttle((function(){t.current&&n.current&&(t.current.getBoundingClientRect().top<=a?(n.current.style.position="fixed",n.current.style.top=a+"px"):(n.current.style.position="relative",n.current.style.top="0"))}),16.7);return window.addEventListener("scroll",e,!0),function(){window.addEventListener("scroll",e,!0)}}),[]),{containerRef:t,contentRef:n}}},qeYF:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wz3H"),o=n.n(r),a=n("ohty"),i=n("q1tI"),u=n("/Kyu"),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var s=function(e){var t=e.sceneName,n=void 0===t?"":t,r=e.offset,s=void 0===r?0:r,l=e.pagecount,d=void 0===l?10:l,f=e.listS,p=void 0===f?{}:f,g=e.listI,h=void 0===g?{}:g,v=e.param,y=e.opt,w=e.config,b=Object(i.useRef)({}),m=Object(i.useRef)({offset:1,pagecount:20,size:0,list:[]}),k=Object(i.useState)(m.current),O=k[0],S=k[1],I=Object(i.useState)(null)[1];Object(i.useMemo)((function(){b.current=JSON.parse(JSON.stringify(u.defaultRequestData)),b.current.head.hostAppInfo.scene=n,b.current.body.listS=p,b.current.body.param=v,b.current.body.listI=c({},h),b.current.head.requestId=(~~(1e8*Math.random())).toString(),m.current={offset:1,pagecount:20,size:0,list:[]},I({})}),[d,p,h,v,y,w].map((function(e){return JSON.stringify(e)}))),b.current.body.listI.offset=[s],b.current.head.userInfo.guid=a.storage.getItem("guid");var j=o()(c(c({},y),{url:y.url+"?params="+encodeURIComponent(v),dataJSON:b.current,swOption:{sw_cache_mod:"swr",sw_cache_keep:"30"}}),c({},w)),_=j.data,N=j.isValidating,x=j.error,E=j.revalidate;return Object(i.useMemo)((function(){var t,n;if(_)if((n=e.formatData?e.formatData(_):_)&&0===n.code){var r=n.data,o=m.current.list;o.length=Math.max(o.length,s+r.length),r.forEach((function(e,t){o[s+t]=e})),m.current={offset:s,pagecount:d,size:n.size,list:o},S(m.current)}else null===(t=window.aegis)||void 0===t||t.report("\u6570\u636e\u6e90\u670d\u52a1\u8fd4\u56de\u9519\u8bef, requestId: "+b.current.head.requestId+" swTime: "+_.swTime+" request:"+JSON.stringify(e)+" ,errors "+JSON.stringify(_))}),[_]),{requestData:b.current,data:_,pageData:O,revalidate:E,isValidating:N,error:x}}},"rU+v":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("q1tI"),o=n("i8i4");function a(){var e=Object(r.useRef)(null);if(null===e.current&&"undefined"!==typeof document){var t=document.createElement("div");t.setAttribute("data-body-portal",""),e.current=t}return Object(r.useLayoutEffect)((function(){var t=e.current;if(t&&"undefined"!==typeof document)return document.body.appendChild(t),function(){document.body.removeChild(t),e.current=null}}),[]),function(t){return e.current&&Object(o.createPortal)(t,e.current)}}},tseF:function(e,t,n){"use strict";n("q1tI")},wtwR:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("q1tI");function o(e,t){var n=Object(r.useRef)(),o=Object(r.useRef)(e);return Object(r.useEffect)((function(){o.current=e}),[e]),Object(r.useEffect)((function(){if(t&&"number"===typeof t)return n.current=window.setInterval((function(){return o.current()}),t),function(){return window.clearInterval(n.current)}}),[t]),n}}}]);